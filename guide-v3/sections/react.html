<h1>استفاده در React</h1>

<p>راهنمای پیاده‌سازی SDK در پروژه‌های React</p>

<h2>Hook ساده</h2>

<div class="step">
  <h3>ایجاد useMakeup Hook</h3>

  <div class="code-container">
    <div class="code-header">
      <span>hooks/useMakeup.js</span>
      <button class="copy-btn" onclick="copyCode(this)">کپی</button>
    </div>
    <pre><code class="language-javascript">import { useState, useEffect, useCallback } from 'react';

export const useMakeup = (token, productUid) => {
    const [makeup, setMakeup] = useState(null);
    const [isReady, setIsReady] = useState(false);
    const [error, setError] = useState(null);

    useEffect(() => {
        if (!token || !productUid) return;

        const initSDK = async () => {
            try {
                // تنظیم Token
                window.Makeup.setToken(token);
                
                // راه‌اندازی
                const instance = window.initMakeup({
                    productUid,
                    onReady: () => setIsReady(true),
                    onError: setError
                });
                
                setMakeup(instance);
            } catch (err) {
                setError(err);
            }
        };

        initSDK();

        return () => {
            makeup?.cleanup();
        };
    }, [token, productUid]);

    const changeColor = useCallback((type, color) => {
        return makeup?.changeMakeupColor(type, color);
    }, [makeup]);

    const changePattern = useCallback((type, pattern) => {
        return makeup?.changeMakeupPattern(type, pattern);
    }, [makeup]);

    const switchMode = useCallback((mode) => {
        return makeup?.switchMode(mode);
    }, [makeup]);

    return {
        makeup,
        isReady,
        error,
        changeColor,
        changePattern,
        switchMode
    };
};</code></pre>
  </div>
</div>

<h2>کامپوننت اصلی</h2>

<div class="step">
  <h3>MakeupSDK Component</h3>

  <div class="code-container">
    <div class="code-header">
      <span>components/MakeupSDK.jsx</span>
      <button class="copy-btn" onclick="copyCode(this)">کپی</button>
    </div>
    <pre><code class="language-javascript">import React from 'react';
import { useMakeup } from '../hooks/useMakeup';

const MakeupSDK = ({ token, productUid }) => {
    const { isReady, error, changeColor, changePattern, switchMode } = useMakeup(token, productUid);

    if (error) {
        return (
            &lt;div style={{ padding: '20px', textAlign: 'center', color: 'red' }}&gt;
                &lt;h3&gt;خطا در بارگذاری SDK&lt;/h3&gt;
                &lt;p&gt;{error.message}&lt;/p&gt;
            &lt;/div&gt;
        );
    }

    return (
        &lt;div style={{ maxWidth: '800px', margin: '0 auto' }}&gt;
            {!isReady && (
                &lt;div style={{ padding: '20px', textAlign: 'center' }}&gt;
                    در حال بارگذاری...
                &lt;/div&gt;
            )}
            
            &lt;div id="armo-makeup-view" /&gt;
            
            {isReady && (
                &lt;div style={{ padding: '20px', textAlign: 'center' }}&gt;
                    &lt;button onClick={() => changeColor('lips', '#FF6B9D')}&gt;
                        صورتی
                    &lt;/button&gt;
                    &lt;button onClick={() => changeColor('lips', '#DC143C')}&gt;
                        قرمز
                    &lt;/button&gt;
                    &lt;button onClick={() => changePattern('lips', 'matte')}&gt;
                        مات
                    &lt;/button&gt;
                    &lt;button onClick={() => changePattern('lips', 'glossy')}&gt;
                        براق
                    &lt;/button&gt;
                    &lt;button onClick={() => switchMode('image')}&gt;
                        حالت تصویر
                    &lt;/button&gt;
                &lt;/div&gt;
            )}
        &lt;/div&gt;
    );
};

export default MakeupSDK;</code></pre>
  </div>
</div>

<h2>استفاده در App</h2>

<div class="step">
  <h3>App.jsx</h3>

  <div class="code-container">
    <div class="code-header">
      <span>App.jsx</span>
      <button class="copy-btn" onclick="copyCode(this)">کپی</button>
    </div>
    <pre><code class="language-javascript">import React from 'react';
import MakeupSDK from './components/MakeupSDK';

function App() {
    return (
        &lt;div className="App"&gt;
            &lt;h1&gt;آرایش مجازی&lt;/h1&gt;
            &lt;MakeupSDK 
                token="YOUR_TOKEN_HERE"
                productUid="YOUR_PRODUCT_UID"
            /&gt;
        &lt;/div&gt;
    );
}

export default App;</code></pre>
  </div>
</div>

<h2>React Native / WebView</h2>

<div class="step">
  <h3>WebView Component</h3>

  <div class="code-container">
    <div class="code-header">
      <span>WebViewMakeup.jsx</span>
      <button class="copy-btn" onclick="copyCode(this)">کپی</button>
    </div>
    <pre><code class="language-javascript">import React from 'react';
import { WebView } from 'react-native-webview';

const WebViewMakeup = ({ token, productUid }) => {
    const htmlContent = `
        &lt;!DOCTYPE html&gt;
        &lt;html&gt;
        &lt;head&gt;
            &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
            &lt;link rel="stylesheet" href="https://cdn.armo.tech/sdk/v3/makeup.min.css"&gt;
        &lt;/head&gt;
        &lt;body style="margin:0;"&gt;
            &lt;div id="armo-makeup-view"&gt;&lt;/div&gt;
            &lt;script src="https://cdn.armo.tech/sdk/v3/makeup.min.js"&gt;&lt;/script&gt;
            &lt;script&gt;
                window.Makeup.setToken('${token}');
                window.initMakeup({
                    productUid: '${productUid}',
                });
            &lt;/script&gt;
        &lt;/body&gt;
        &lt;/html&gt;
    `;

    return (
        &lt;WebView
            source={{ html: htmlContent }}
            style={{ flex: 1 }}
            mediaPlaybackRequiresUserAction={false}
            allowsInlineMediaPlayback
            javaScriptEnabled
            domStorageEnabled
        /&gt;
    );
};

export default WebViewMakeup;</code></pre>
  </div>
</div>

<div class="info-box">
  <h3>نکات React:</h3>
  <ul>
    <li>SDK را از CDN استفاده کنید</li>
    <li>Token و ProductUID را props پاس دهید</li>
    <li>cleanup را در useEffect انجام دهید</li>
    <li>برای موبایل از WebView استفاده کنید</li>
  </ul>
</div>
